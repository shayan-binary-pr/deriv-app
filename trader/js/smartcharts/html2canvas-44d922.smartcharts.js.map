{"version":3,"sources":["webpack://smartcharts/./chartiq/html2canvas.min.js"],"names":["e","exports","module","define","amd","f","window","global","self","html2canvas","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","root","freeExports","freeModule","freeGlobal","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","key","error","type","RangeError","map","array","fn","mapDomain","string","split","join","ucs2decode","output","counter","value","extra","charCodeAt","push","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","inputLength","out","bias","basic","j","index","oldi","w","baseMinusT","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","domain","test","slice","toLowerCase","toASCII","nodeType","hasOwnProperty","log","restoreOwnerScroll","ownerDocument","x","y","defaultView","pageXOffset","pageYOffset","scrollTo","cloneCanvasContents","canvas","clonedCanvas","width","height","getContext","putImageData","getImageData","cloneNode","node","javascriptEnabled","clone","document","createTextNode","nodeValue","child","firstChild","nodeName","appendChild","nextSibling","_scrollTop","scrollTop","_scrollLeft","scrollLeft","initNode","containerDocument","options","documentElement","container","createElement","className","style","visibility","position","left","top","border","scrolling","body","Promise","resolve","documentClone","contentWindow","onload","interval","setInterval","childNodes","clearInterval","navigator","userAgent","scrollY","scrollX","open","write","replaceChild","adoptNode","close","Color","g","b","result","fromArray","namedColor","rgb","rgba","hex6","hex3","prototype","darken","amount","round","isTransparent","isBlack","Array","isArray","min","_hex3","match","parseInt","_hex6","substring","_rgb","Number","_rgba","toString","color","colors","isColor","Support","CanvasRenderer","ImageLoader","NodeParser","NodeContainer","utils","createWindowClone","loadUrlDocument","getBounds","html2canvasNodeAttribute","html2canvasCloneIndex","nodeList","logging","start","Date","now","async","allowTaint","removeContainer","imageTimeout","renderer","strict","proxy","reject","innerWidth","innerHeight","absoluteUrl","then","renderWindow","undefined","setAttribute","renderDocument","onrendered","html2canvasExport","Object","create","windowWidth","windowHeight","html2canvasIndex","attributeName","selector","querySelector","removeAttribute","clonedWindow","oncloneHandler","onclone","support","imageLoader","bounds","documentWidth","documentHeight","parser","ready","crop","cleanupContainer","parentNode","removeChild","croppedCanvas","x1","max","x2","y1","y2","drawImage","doc","scrollWidth","offsetWidth","clientWidth","scrollHeight","offsetHeight","clientHeight","url","link","href","smallImage","DummyImageContainer","src","promise","image","Image","onerror","complete","Font","family","size","img","span","sampleText","baseline","middle","fontFamily","fontSize","margin","padding","verticalAlign","offsetTop","lineHeight","lineWidth","FontMetrics","data","getMetrics","FrameContainer","sameOrigin","proxyLoad","URL","GradientContainer","imageData","colorStops","x0","y0","TYPES","LINEAR","RADIAL","REGEXP_COLORSTOP","ImageContainer","cors","tainted","crossOrigin","ProxyImageContainer","SVGContainer","SVGNodeContainer","LinearGradientContainer","WebkitGradientContainer","bind","origin","getOrigin","location","findImages","nodes","images","reduce","imageNodes","concat","args","method","forEach","addImage","loadImage","findBackgroundImage","parseBackgroundImages","filter","hasImageBackground","callback","newImage","imageExists","isSVG","svg","replace","isSameOrigin","useCORS","isInline","some","protocol","hostname","port","getPromise","timeout","dummy","get","found","fetch","all","timer","race","res","setTimeout","clearTimeout","apply","arguments","hasDirection","REGEXP_DIRECTION","reverse","ratio","parseFloat","isNaN","colorStop","colorStopMatch","unit","stop","find","count","logger","console","Function","parseBackgrounds","offsetBounds","parent","stack","borders","clip","backgroundClip","visible","computedStyles","styles","backgroundImages","transformData","transformMatrix","isPseudoElement","opacity","cloneTo","getOpacity","cssFloat","assignStack","children","isElementVisible","Node","TEXT_NODE","css","hasAttribute","getAttribute","attribute","computedStyle","before","prefixedCss","prefixes","prefix","substr","toUpperCase","getComputedStyle","cssInt","fontWeight","weight","parseClip","matches","CLIP","right","bottom","cssList","property","trim","isPercentage","parseBackgroundSize","targetRatio","currentRatio","parseBackgroundPosition","backgroundSize","parseBackgroundRepeat","parseTextShadows","textShadow","results","shadows","TEXT_SHADOW_PROPERTY","TEXT_SHADOW_VALUES","offsetX","offsetY","blur","parseTransform","hasTransform","offset","parseBounds","removePx","asFloat","matrix","parseTransformMatrix","transform","parseMatrix","MATRIX_PROPERTY","getValue","tagName","selectionValue","placeholder","option","selectedIndex","text","matrix3d","indexOf","str","TextContainer","PseudoElementContainer","StackingContext","element","range","renderQueue","background","rectangle","canvasBackground","visibile","createPseudoHideStyles","disableAnimations","flatten","getChildren","getPseudoElements","fontMetrics","calculateOverflowClips","isElement","createStackingContexts","sortStackingContexts","parse","paint","renderIndex","asyncRenderer","appendToDOM","parseBorders","cssClip","hasParentClip","cleanDOM","isTextNode","queue","asyncTimer","createStyles","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","hidePseudoElements","innerHTML","ELEMENT_NODE","getPseudoElement","after","toCamelCase","content","display","stripQuotes","isImage","pseudoNode","pseudoContainer","item","parentContainer","renderableNode","nonIgnoredElement","newStackingContext","hasOwnStacking","parentStack","getParentStack","contexts","isRootElement","hasOpacity","isPositionedForStacking","isBodyWithTransparentRoot","isPositioned","zIndex0","isInlineBlock","isFloating","sort","zIndexSort","parseTextBounds","textList","rangeBounds","getRangeBounds","replacementNode","splitText","getWrapperBounds","wrapper","backupText","createRange","setStart","setEnd","getBoundingClientRect","ClearTransform","negativeZindex","negativeZIndex","descendantElements","descendantNonFloats","not","nonInlineNonPositionedDescendants","inlineLevel","nonPositionedFloats","inFlow","stackLevel0","hasText","positiveZindex","positiveZIndex","isStackingContext","ctx","restore","paintText","paintNode","setOpacity","save","setTransform","paintCheckbox","paintRadio","paintElement","renderBackground","getWidth","renderBorders","imgContainer","renderImage","imageContainer","paintFormValue","radius","borderPoints","calculateCurvePoints","calculateBorders","checked","font","circleStroke","circle","ceil","properties","message","textContent","applyTextTransform","characters","ucs2","letterRendering","noLetterSpacing","hasUnicode","getWords","character","fontShadow","clearShadow","renderTextDecoration","metrics","borderColorTransforms","inset","nodeBounds","getBorderRadiusData","side","colorTransform","parseBackgroundClip","borderSide","bx","by","bw","bh","drawSide","c1","c2","c3","c4","topLeftOuter","topLeftInner","topRightOuter","topRightInner","bottomRightOuter","bottomRightInner","bottomLeftOuter","bottomLeftInner","borderArgs","parseCorner","getCurvePoints","r1","r2","kappa","sqrt","ox","oy","xm","ym","topLeft","bezierCurve","topRight","bottomRight","bottomLeft","borderRadius","tlh","tlv","trh","trv","brh","brv","blh","blv","topWidth","rightHeight","bottomWidth","leftHeight","subdivide","startControl","endControl","end","lerp","ab","bc","cd","abbc","bccd","dest","curveTo","curveToReversed","borderData","radius1","radius2","outer1","inner1","outer2","inner2","corner1","corner2","arr","asInt","zIndex","context","nodeContainer","arrays","first","words","onWordBoundary","word","isWordBoundary","characterCode","XHR","decode64","Proxy","proxyUrl","supportsCORS","XMLHttpRequest","createCallback","createProxyUrl","jsonp","response","proxyCount","ProxyURL","supportsCORSImage","cleanup","random","encodeURIComponent","documentFromHTML","html","DOMParser","parseFromString","implementation","createHTMLDocument","ee","host","head","insertBefore","getHideClass","Renderer","paddingLeft","paddingTop","paddingRight","paddingBottom","renderBackgroundColor","renderBackgroundImage","renderBorder","drawShape","backgroundImage","renderBackgroundRepeating","gradientImage","renderBackgroundGradient","repeat","backgroundRepeatShape","renderBackgroundRepeat","taintCtx","textBaseline","variables","setFillStyle","fillStyle","fillRect","beginPath","arc","PI","closePath","fill","stroke","strokeColor","strokeStyle","shape","taints","sx","sy","sw","sh","dx","dy","dw","dh","shapes","hasEntries","point","rect","variant","setVariable","globalAlpha","translate","fillText","backgroundPosition","borderLeft","borderTop","createPattern","resizeImage","gradient","createLinearGradient","addColorStop","ownStacking","testRangeBounds","testCORS","testSVG","testElement","rangeHeight","selectNode","toDataURL","hasFabric","inlineFormatting","fabric","loadSVGFromString","createCanvas","removeContentType","objects","StaticCanvas","lowerCanvasEl","setWidth","setHeight","add","util","groupSVGElements","renderAll","atob","_native","XMLSerializer","serializeToString","parseSVGDocument","capitalize","p1","p2","base64","chars","len","encoded1","encoded2","encoded3","encoded4","byte1","byte2","byte3","clientRect","offsetParent","offsetLeft","whitespace","definition","prefix_i","block","mode","numParen","quote","appendResult","c","xhr","status","responseText","statusText","send"],"mappings":"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","file":"html2canvas-44d922.smartcharts.js","sourcesContent":["/*\n  html2canvas 0.5.0-beta3 <http://html2canvas.hertzen.com>\n  Copyright (c) 2016 Niklas von Hertzen\n\n  Released under  License\n*/\n\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define(\"html2canvas\",e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.html2canvas=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\n/*! http://mths.be/punycode v1.2.4 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^ -~]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /\\x2E|\\u3002|\\uFF0E|\\uFF61/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\twhile (length--) {\n\t\t\tarray[length] = fn(array[length]);\n\t\t}\n\t\treturn array;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings.\n\t * @private\n\t * @param {String} domain The domain name.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\treturn map(string.split(regexSeparators), fn).join('.');\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <http://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols to a Punycode string of ASCII-only\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name to Unicode. Only the\n\t * Punycoded parts of the domain name will be converted, i.e. it doesn't\n\t * matter if you call it on a string that has already been converted to\n\t * Unicode.\n\t * @memberOf punycode\n\t * @param {String} domain The Punycode domain name to convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(domain) {\n\t\treturn mapDomain(domain, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name to Punycode. Only the\n\t * non-ASCII parts of the domain name will be converted, i.e. it doesn't\n\t * matter if you call it with a domain that's already in ASCII.\n\t * @memberOf punycode\n\t * @param {String} domain The domain name to convert, as a Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name.\n\t */\n\tfunction toASCII(domain) {\n\t\treturn mapDomain(domain, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.2.4',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <http://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction restoreOwnerScroll(ownerDocument, x, y) {\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n}\n\nfunction cloneCanvasContents(canvas, clonedCanvas) {\n    try {\n        if (clonedCanvas) {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n        }\n    } catch(e) {\n        log(\"Unable to copy canvas content from\", canvas, e);\n    }\n}\n\nfunction cloneNode(node, javascriptEnabled) {\n    var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\n\n    var child = node.firstChild;\n    while(child) {\n        if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\n            clone.appendChild(cloneNode(child, javascriptEnabled));\n        }\n        child = child.nextSibling;\n    }\n\n    if (node.nodeType === 1) {\n        clone._scrollTop = node.scrollTop;\n        clone._scrollLeft = node.scrollLeft;\n        if (node.nodeName === \"CANVAS\") {\n            cloneCanvasContents(node, clone);\n        } else if (node.nodeName === \"TEXTAREA\" || node.nodeName === \"SELECT\") {\n            clone.value = node.value;\n        }\n    }\n\n    return clone;\n}\n\nfunction initNode(node) {\n    if (node.nodeType === 1) {\n        node.scrollTop = node._scrollTop;\n        node.scrollLeft = node._scrollLeft;\n\n        var child = node.firstChild;\n        while(child) {\n            initNode(child);\n            child = child.nextSibling;\n        }\n    }\n}\n\nmodule.exports = function(ownerDocument, containerDocument, width, height, options, x ,y) {\n    var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\n    var container = containerDocument.createElement(\"iframe\");\n\n    container.className = \"html2canvas-container\";\n    container.style.visibility = \"hidden\";\n    container.style.position = \"fixed\";\n    container.style.left = \"-10000px\";\n    container.style.top = \"0px\";\n    container.style.border = \"0\";\n    container.width = width;\n    container.height = height;\n    container.scrolling = \"no\"; // ios won't scroll without it\n    containerDocument.body.appendChild(container);\n    \n    return new Promise(function(resolve) {\n        var documentClone = container.contentWindow.document;\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n        container.contentWindow.onload = container.onload = function() {\n            var interval = setInterval(function() {\n                if (documentClone.body.childNodes.length > 0) {\n                    initNode(documentClone.documentElement);\n                    clearInterval(interval);\n                    if (options.type === \"view\") {\n                        container.contentWindow.scrollTo(x, y);\n                        if ((/(iPad|iPhone|iPod)/g).test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\n                            documentClone.documentElement.style.top = (-y) + \"px\";\n                            documentClone.documentElement.style.left = (-x) + \"px\";\n                            documentClone.documentElement.style.position = 'absolute';\n                        }\n                    }\n                    resolve(container);\n                }\n            }, 50);\n        };\n        \n        documentClone.open();\n        documentClone.write(\"<!DOCTYPE html><html></html>\");\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(ownerDocument, x, y);\n        documentClone.replaceChild(documentClone.adoptNode(documentElement,true), documentClone.documentElement);\n        documentClone.close();\n    });\n};\n\n},{\"./log\":13}],3:[function(_dereq_,module,exports){\n// http://dev.w3.org/csswg/css-color/\n\nfunction Color(value) {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = null;\n    var result = this.fromArray(value) ||\n        this.namedColor(value) ||\n        this.rgb(value) ||\n        this.rgba(value) ||\n        this.hex6(value) ||\n        this.hex3(value);\n}\n\nColor.prototype.darken = function(amount) {\n    var a = 1 - amount;\n    return  new Color([\n        Math.round(this.r * a),\n        Math.round(this.g * a),\n        Math.round(this.b * a),\n        this.a\n    ]);\n};\n\nColor.prototype.isTransparent = function() {\n    return this.a === 0;\n};\n\nColor.prototype.isBlack = function() {\n    return this.r === 0 && this.g === 0 && this.b === 0;\n};\n\nColor.prototype.fromArray = function(array) {\n    if (Array.isArray(array)) {\n        this.r = Math.min(array[0], 255);\n        this.g = Math.min(array[1], 255);\n        this.b = Math.min(array[2], 255);\n        if (array.length > 3) {\n            this.a = array[3];\n        }\n    }\n\n    return (Array.isArray(array));\n};\n\nvar _hex3 = /^#([a-f0-9]{3})$/i;\n\nColor.prototype.hex3 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex3)) !== null) {\n        this.r = parseInt(match[1][0] + match[1][0], 16);\n        this.g = parseInt(match[1][1] + match[1][1], 16);\n        this.b = parseInt(match[1][2] + match[1][2], 16);\n    }\n    return match !== null;\n};\n\nvar _hex6 = /^#([a-f0-9]{6})$/i;\n\nColor.prototype.hex6 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex6)) !== null) {\n        this.r = parseInt(match[1].substring(0, 2), 16);\n        this.g = parseInt(match[1].substring(2, 4), 16);\n        this.b = parseInt(match[1].substring(4, 6), 16);\n    }\n    return match !== null;\n};\n\n\nvar _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\nColor.prototype.rgb = function(value) {\n    var match = null;\n    if ((match = value.match(_rgb)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n    }\n    return match !== null;\n};\n\nvar _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\n\nColor.prototype.rgba = function(value) {\n    var match = null;\n    if ((match = value.match(_rgba)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n        this.a = Number(match[4]);\n    }\n    return match !== null;\n};\n\nColor.prototype.toString = function() {\n    return this.a !== null && this.a !== 1 ?\n    \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" :\n    \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\n};\n\nColor.prototype.namedColor = function(value) {\n    value = value.toLowerCase();\n    var color = colors[value];\n    if (color) {\n        this.r = color[0];\n        this.g = color[1];\n        this.b = color[2];\n    } else if (value === \"transparent\") {\n        this.r = this.g = this.b = this.a = 0;\n        return true;\n    }\n\n    return !!color;\n};\n\nColor.prototype.isColor = true;\n\n// JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\nvar colors = {\n    \"aliceblue\": [240, 248, 255],\n    \"antiquewhite\": [250, 235, 215],\n    \"aqua\": [0, 255, 255],\n    \"aquamarine\": [127, 255, 212],\n    \"azure\": [240, 255, 255],\n    \"beige\": [245, 245, 220],\n    \"bisque\": [255, 228, 196],\n    \"black\": [0, 0, 0],\n    \"blanchedalmond\": [255, 235, 205],\n    \"blue\": [0, 0, 255],\n    \"blueviolet\": [138, 43, 226],\n    \"brown\": [165, 42, 42],\n    \"burlywood\": [222, 184, 135],\n    \"cadetblue\": [95, 158, 160],\n    \"chartreuse\": [127, 255, 0],\n    \"chocolate\": [210, 105, 30],\n    \"coral\": [255, 127, 80],\n    \"cornflowerblue\": [100, 149, 237],\n    \"cornsilk\": [255, 248, 220],\n    \"crimson\": [220, 20, 60],\n    \"cyan\": [0, 255, 255],\n    \"darkblue\": [0, 0, 139],\n    \"darkcyan\": [0, 139, 139],\n    \"darkgoldenrod\": [184, 134, 11],\n    \"darkgray\": [169, 169, 169],\n    \"darkgreen\": [0, 100, 0],\n    \"darkgrey\": [169, 169, 169],\n    \"darkkhaki\": [189, 183, 107],\n    \"darkmagenta\": [139, 0, 139],\n    \"darkolivegreen\": [85, 107, 47],\n    \"darkorange\": [255, 140, 0],\n    \"darkorchid\": [153, 50, 204],\n    \"darkred\": [139, 0, 0],\n    \"darksalmon\": [233, 150, 122],\n    \"darkseagreen\": [143, 188, 143],\n    \"darkslateblue\": [72, 61, 139],\n    \"darkslategray\": [47, 79, 79],\n    \"darkslategrey\": [47, 79, 79],\n    \"darkturquoise\": [0, 206, 209],\n    \"darkviolet\": [148, 0, 211],\n    \"deeppink\": [255, 20, 147],\n    \"deepskyblue\": [0, 191, 255],\n    \"dimgray\": [105, 105, 105],\n    \"dimgrey\": [105, 105, 105],\n    \"dodgerblue\": [30, 144, 255],\n    \"firebrick\": [178, 34, 34],\n    \"floralwhite\": [255, 250, 240],\n    \"forestgreen\": [34, 139, 34],\n    \"fuchsia\": [255, 0, 255],\n    \"gainsboro\": [220, 220, 220],\n    \"ghostwhite\": [248, 248, 255],\n    \"gold\": [255, 215, 0],\n    \"goldenrod\": [218, 165, 32],\n    \"gray\": [128, 128, 128],\n    \"green\": [0, 128, 0],\n    \"greenyellow\": [173, 255, 47],\n    \"grey\": [128, 128, 128],\n    \"honeydew\": [240, 255, 240],\n    \"hotpink\": [255, 105, 180],\n    \"indianred\": [205, 92, 92],\n    \"indigo\": [75, 0, 130],\n    \"ivory\": [255, 255, 240],\n    \"khaki\": [240, 230, 140],\n    \"lavender\": [230, 230, 250],\n    \"lavenderblush\": [255, 240, 245],\n    \"lawngreen\": [124, 252, 0],\n    \"lemonchiffon\": [255, 250, 205],\n    \"lightblue\": [173, 216, 230],\n    \"lightcoral\": [240, 128, 128],\n    \"lightcyan\": [224, 255, 255],\n    \"lightgoldenrodyellow\": [250, 250, 210],\n    \"lightgray\": [211, 211, 211],\n    \"lightgreen\": [144, 238, 144],\n    \"lightgrey\": [211, 211, 211],\n    \"lightpink\": [255, 182, 193],\n    \"lightsalmon\": [255, 160, 122],\n    \"lightseagreen\": [32, 178, 170],\n    \"lightskyblue\": [135, 206, 250],\n    \"lightslategray\": [119, 136, 153],\n    \"lightslategrey\": [119, 136, 153],\n    \"lightsteelblue\": [176, 196, 222],\n    \"lightyellow\": [255, 255, 224],\n    \"lime\": [0, 255, 0],\n    \"limegreen\": [50, 205, 50],\n    \"linen\": [250, 240, 230],\n    \"magenta\": [255, 0, 255],\n    \"maroon\": [128, 0, 0],\n    \"mediumaquamarine\": [102, 205, 170],\n    \"mediumblue\": [0, 0, 205],\n    \"mediumorchid\": [186, 85, 211],\n    \"mediumpurple\": [147, 112, 219],\n    \"mediumseagreen\": [60, 179, 113],\n    \"mediumslateblue\": [123, 104, 238],\n    \"mediumspringgreen\": [0, 250, 154],\n    \"mediumturquoise\": [72, 209, 204],\n    \"mediumvioletred\": [199, 21, 133],\n    \"midnightblue\": [25, 25, 112],\n    \"mintcream\": [245, 255, 250],\n    \"mistyrose\": [255, 228, 225],\n    \"moccasin\": [255, 228, 181],\n    \"navajowhite\": [255, 222, 173],\n    \"navy\": [0, 0, 128],\n    \"oldlace\": [253, 245, 230],\n    \"olive\": [128, 128, 0],\n    \"olivedrab\": [107, 142, 35],\n    \"orange\": [255, 165, 0],\n    \"orangered\": [255, 69, 0],\n    \"orchid\": [218, 112, 214],\n    \"palegoldenrod\": [238, 232, 170],\n    \"palegreen\": [152, 251, 152],\n    \"paleturquoise\": [175, 238, 238],\n    \"palevioletred\": [219, 112, 147],\n    \"papayawhip\": [255, 239, 213],\n    \"peachpuff\": [255, 218, 185],\n    \"peru\": [205, 133, 63],\n    \"pink\": [255, 192, 203],\n    \"plum\": [221, 160, 221],\n    \"powderblue\": [176, 224, 230],\n    \"purple\": [128, 0, 128],\n    \"rebeccapurple\": [102, 51, 153],\n    \"red\": [255, 0, 0],\n    \"rosybrown\": [188, 143, 143],\n    \"royalblue\": [65, 105, 225],\n    \"saddlebrown\": [139, 69, 19],\n    \"salmon\": [250, 128, 114],\n    \"sandybrown\": [244, 164, 96],\n    \"seagreen\": [46, 139, 87],\n    \"seashell\": [255, 245, 238],\n    \"sienna\": [160, 82, 45],\n    \"silver\": [192, 192, 192],\n    \"skyblue\": [135, 206, 235],\n    \"slateblue\": [106, 90, 205],\n    \"slategray\": [112, 128, 144],\n    \"slategrey\": [112, 128, 144],\n    \"snow\": [255, 250, 250],\n    \"springgreen\": [0, 255, 127],\n    \"steelblue\": [70, 130, 180],\n    \"tan\": [210, 180, 140],\n    \"teal\": [0, 128, 128],\n    \"thistle\": [216, 191, 216],\n    \"tomato\": [255, 99, 71],\n    \"turquoise\": [64, 224, 208],\n    \"violet\": [238, 130, 238],\n    \"wheat\": [245, 222, 179],\n    \"white\": [255, 255, 255],\n    \"whitesmoke\": [245, 245, 245],\n    \"yellow\": [255, 255, 0],\n    \"yellowgreen\": [154, 205, 50]\n};\n\nmodule.exports = Color;\n\n},{}],4:[function(_dereq_,module,exports){\nvar Support = _dereq_('./support');\nvar CanvasRenderer = _dereq_('./renderers/canvas');\nvar ImageLoader = _dereq_('./imageloader');\nvar NodeParser = _dereq_('./nodeparser');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar log = _dereq_('./log');\nvar utils = _dereq_('./utils');\nvar createWindowClone = _dereq_('./clone');\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\nvar getBounds = utils.getBounds;\n\nvar html2canvasNodeAttribute = \"data-html2canvas-node\";\nvar html2canvasCloneIndex = 0;\n\nfunction html2canvas(nodeList, options) {\n    var index = html2canvasCloneIndex++;\n    options = options || {};\n    if (options.logging) {\n        log.options.logging = true;\n        log.options.start = Date.now();\n    }\n\n    options.async = typeof(options.async) === \"undefined\" ? true : options.async;\n    options.allowTaint = typeof(options.allowTaint) === \"undefined\" ? false : options.allowTaint;\n    options.removeContainer = typeof(options.removeContainer) === \"undefined\" ? true : options.removeContainer;\n    options.javascriptEnabled = typeof(options.javascriptEnabled) === \"undefined\" ? false : options.javascriptEnabled;\n    options.imageTimeout = typeof(options.imageTimeout) === \"undefined\" ? 10000 : options.imageTimeout;\n    options.renderer = typeof(options.renderer) === \"function\" ? options.renderer : CanvasRenderer;\n    options.strict = !!options.strict;\n\n    if (typeof(nodeList) === \"string\") {\n        if (typeof(options.proxy) !== \"string\") {\n            return Promise.reject(\"Proxy must be used when rendering url\");\n        }\n        var width = options.width != null ? options.width : window.innerWidth;\n        var height = options.height != null ? options.height : window.innerHeight;\n        return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\n        });\n    }\n\n    var node = ((nodeList === undefined) ? [document.documentElement] : ((nodeList.length) ? nodeList : [nodeList]))[0];\n    node.setAttribute(html2canvasNodeAttribute + index, index);\n    return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function(canvas) {\n        if (typeof(options.onrendered) === \"function\") {\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\n            options.onrendered(canvas);\n        }\n        return canvas;\n    });\n}\n\nhtml2canvas.CanvasRenderer = CanvasRenderer;\nhtml2canvas.NodeContainer = NodeContainer;\nhtml2canvas.log = log;\nhtml2canvas.utils = utils;\n\nvar html2canvasExport = (typeof(document) === \"undefined\" || typeof(Object.create) !== \"function\" || typeof(document.createElement(\"canvas\").getContext) !== \"function\") ? function() {\n    return Promise.reject(\"No canvas support\");\n} : html2canvas;\n\nmodule.exports = html2canvasExport;\n\nif (typeof(define) === 'function' && define.amd) {\n    define('html2canvas', [], function() {\n        return html2canvasExport;\n    });\n}\n\nfunction renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\n    return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function(container) {\n        log(\"Document cloned\");\n        var attributeName = html2canvasNodeAttribute + html2canvasIndex;\n        var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\n        document.querySelector(selector).removeAttribute(attributeName);\n        var clonedWindow = container.contentWindow;\n        var node = clonedWindow.document.querySelector(selector);\n        var oncloneHandler = (typeof(options.onclone) === \"function\") ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\n        return oncloneHandler.then(function() {\n            return renderWindow(node, container, options, windowWidth, windowHeight);\n        });\n    });\n}\n\nfunction renderWindow(node, container, options, windowWidth, windowHeight) {\n    var clonedWindow = container.contentWindow;\n    var support = new Support(clonedWindow.document);\n    var imageLoader = new ImageLoader(options, support);\n    var bounds = getBounds(node);\n    var width = options.type === \"view\" ? windowWidth : documentWidth(clonedWindow.document);\n    var height = options.type === \"view\" ? windowHeight : documentHeight(clonedWindow.document);\n    var renderer = new options.renderer(width, height, imageLoader, options, document);\n    var parser = new NodeParser(node, renderer, support, imageLoader, options);\n    return parser.ready.then(function() {\n        log(\"Finished rendering\");\n        var canvas;\n\n        if (options.type === \"view\") {\n            canvas = crop(renderer.canvas, {width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0});\n        } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\n            canvas = renderer.canvas;\n        } else {\n            canvas = crop(renderer.canvas, {width:  options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0});\n        }\n\n        cleanupContainer(container, options);\n        return canvas;\n    });\n}\n\nfunction cleanupContainer(container, options) {\n    if (options.removeContainer) {\n        container.parentNode.removeChild(container);\n        log(\"Cleaned up container\");\n    }\n}\n\nfunction crop(canvas, bounds) {\n    var croppedCanvas = document.createElement(\"canvas\");\n    var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\n    var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\n    var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\n    var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\n    croppedCanvas.width = bounds.width;\n    croppedCanvas.height =  bounds.height;\n    var width = x2-x1;\n    var height = y2-y1;\n    log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", width, \"height:\", height);\n    log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \"with x\", x1, \"and y\", y1);\n    croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\n    return croppedCanvas;\n}\n\nfunction documentWidth (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\n        Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\n        Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\n    );\n}\n\nfunction documentHeight (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\n        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\n        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\n    );\n}\n\nfunction absoluteUrl(url) {\n    var link = document.createElement(\"a\");\n    link.href = url;\n    link.href = link.href;\n    return link;\n}\n\n},{\"./clone\":2,\"./imageloader\":11,\"./log\":13,\"./nodecontainer\":14,\"./nodeparser\":15,\"./proxy\":16,\"./renderers/canvas\":20,\"./support\":22,\"./utils\":26}],5:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction DummyImageContainer(src) {\n    this.src = src;\n    log(\"DummyImageContainer for\", src);\n    if (!this.promise || !this.image) {\n        log(\"Initiating DummyImageContainer\");\n        DummyImageContainer.prototype.image = new Image();\n        var image = this.image;\n        DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\n            image.onload = resolve;\n            image.onerror = reject;\n            image.src = smallImage();\n            if (image.complete === true) {\n                resolve(image);\n            }\n        });\n    }\n}\n\nmodule.exports = DummyImageContainer;\n\n},{\"./log\":13,\"./utils\":26}],6:[function(_dereq_,module,exports){\nvar smallImage = _dereq_('./utils').smallImage;\n\nfunction Font(family, size) {\n    var container = document.createElement('div'),\n        img = document.createElement('img'),\n        span = document.createElement('span'),\n        sampleText = 'Hidden Text',\n        baseline,\n        middle;\n\n    container.style.visibility = \"hidden\";\n    container.style.fontFamily = family;\n    container.style.fontSize = size;\n    container.style.margin = 0;\n    container.style.padding = 0;\n\n    document.body.appendChild(container);\n\n    img.src = smallImage();\n    img.width = 1;\n    img.height = 1;\n\n    img.style.margin = 0;\n    img.style.padding = 0;\n    img.style.verticalAlign = \"baseline\";\n\n    span.style.fontFamily = family;\n    span.style.fontSize = size;\n    span.style.margin = 0;\n    span.style.padding = 0;\n\n    span.appendChild(document.createTextNode(sampleText));\n    container.appendChild(span);\n    container.appendChild(img);\n    baseline = (img.offsetTop - span.offsetTop) + 1;\n\n    container.removeChild(span);\n    container.appendChild(document.createTextNode(sampleText));\n\n    container.style.lineHeight = \"normal\";\n    img.style.verticalAlign = \"super\";\n\n    middle = (img.offsetTop-container.offsetTop) + 1;\n\n    document.body.removeChild(container);\n\n    this.baseline = baseline;\n    this.lineWidth = 1;\n    this.middle = middle;\n}\n\nmodule.exports = Font;\n\n},{\"./utils\":26}],7:[function(_dereq_,module,exports){\nvar Font = _dereq_('./font');\n\nfunction FontMetrics() {\n    this.data = {};\n}\n\nFontMetrics.prototype.getMetrics = function(family, size) {\n    if (this.data[family + \"-\" + size] === undefined) {\n        this.data[family + \"-\" + size] = new Font(family, size);\n    }\n    return this.data[family + \"-\" + size];\n};\n\nmodule.exports = FontMetrics;\n\n},{\"./font\":6}],8:[function(_dereq_,module,exports){\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\n\nfunction FrameContainer(container, sameOrigin, options) {\n    this.image = null;\n    this.src = container;\n    var self = this;\n    var bounds = getBounds(container);\n    this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function(resolve) {\n        if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\n            container.contentWindow.onload = container.onload = function() {\n                resolve(container);\n            };\n        } else {\n            resolve(container);\n        }\n    })).then(function(container) {\n        var html2canvas = _dereq_('./core');\n        return html2canvas(container.contentWindow.document.documentElement, {type: 'view', width: container.width, height: container.height, proxy: options.proxy, javascriptEnabled: options.javascriptEnabled, removeContainer: options.removeContainer, allowTaint: options.allowTaint, imageTimeout: options.imageTimeout / 2});\n    }).then(function(canvas) {\n        return self.image = canvas;\n    });\n}\n\nFrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\n    var container = this.src;\n    return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\n};\n\nmodule.exports = FrameContainer;\n\n},{\"./core\":4,\"./proxy\":16,\"./utils\":26}],9:[function(_dereq_,module,exports){\nfunction GradientContainer(imageData) {\n    this.src = imageData.value;\n    this.colorStops = [];\n    this.type = null;\n    this.x0 = 0.5;\n    this.y0 = 0.5;\n    this.x1 = 0.5;\n    this.y1 = 0.5;\n    this.promise = Promise.resolve(true);\n}\n\nGradientContainer.TYPES = {\n    LINEAR: 1,\n    RADIAL: 2\n};\n\n// TODO: support hsl[a], negative %/length values\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nGradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\n\nmodule.exports = GradientContainer;\n\n},{}],10:[function(_dereq_,module,exports){\nfunction ImageContainer(src, cors) {\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.tainted = null;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        if (cors) {\n            self.image.crossOrigin = \"anonymous\";\n        }\n        self.image.src = src;\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    });\n}\n\nmodule.exports = ImageContainer;\n\n},{}],11:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar ImageContainer = _dereq_('./imagecontainer');\nvar DummyImageContainer = _dereq_('./dummyimagecontainer');\nvar ProxyImageContainer = _dereq_('./proxyimagecontainer');\nvar FrameContainer = _dereq_('./framecontainer');\nvar SVGContainer = _dereq_('./svgcontainer');\nvar SVGNodeContainer = _dereq_('./svgnodecontainer');\nvar LinearGradientContainer = _dereq_('./lineargradientcontainer');\nvar WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\nvar bind = _dereq_('./utils').bind;\n\nfunction ImageLoader(options, support) {\n    this.link = null;\n    this.options = options;\n    this.support = support;\n    this.origin = this.getOrigin(window.location.href);\n}\n\nImageLoader.prototype.findImages = function(nodes) {\n    var images = [];\n    nodes.reduce(function(imageNodes, container) {\n        switch(container.node.nodeName) {\n        case \"IMG\":\n            return imageNodes.concat([{\n                args: [container.node.src],\n                method: \"url\"\n            }]);\n        case \"svg\":\n        case \"IFRAME\":\n            return imageNodes.concat([{\n                args: [container.node],\n                method: container.node.nodeName\n            }]);\n        }\n        return imageNodes;\n    }, []).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.findBackgroundImage = function(images, container) {\n    container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.addImage = function(images, callback) {\n    return function(newImage) {\n        newImage.args.forEach(function(image) {\n            if (!this.imageExists(images, image)) {\n                images.splice(0, 0, callback.call(this, newImage));\n                log('Added image #' + (images.length), typeof(image) === \"string\" ? image.substring(0, 100) : image);\n            }\n        }, this);\n    };\n};\n\nImageLoader.prototype.hasImageBackground = function(imageData) {\n    return imageData.method !== \"none\";\n};\n\nImageLoader.prototype.loadImage = function(imageData) {\n    if (imageData.method === \"url\") {\n        var src = imageData.args[0];\n        if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\n            return new SVGContainer(src);\n        } else if (src.match(/data:image\\/.*;base64,/i)) {\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), false);\n        } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\n            return new ImageContainer(src, false);\n        } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\n            return new ImageContainer(src, true);\n        } else if (this.options.proxy) {\n            return new ProxyImageContainer(src, this.options.proxy);\n        } else {\n            return new DummyImageContainer(src);\n        }\n    } else if (imageData.method === \"linear-gradient\") {\n        return new LinearGradientContainer(imageData);\n    } else if (imageData.method === \"gradient\") {\n        return new WebkitGradientContainer(imageData);\n    } else if (imageData.method === \"svg\") {\n        return new SVGNodeContainer(imageData.args[0], this.support.svg);\n    } else if (imageData.method === \"IFRAME\") {\n        return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\n    } else {\n        return new DummyImageContainer(imageData);\n    }\n};\n\nImageLoader.prototype.isSVG = function(src) {\n    return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\n};\n\nImageLoader.prototype.imageExists = function(images, src) {\n    return images.some(function(image) {\n        return image.src === src;\n    });\n};\n\nImageLoader.prototype.isSameOrigin = function(url) {\n    return (this.getOrigin(url) === this.origin);\n};\n\nImageLoader.prototype.getOrigin = function(url) {\n    var link = this.link || (this.link = document.createElement(\"a\"));\n    link.href = url;\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n    return link.protocol + link.hostname + link.port;\n};\n\nImageLoader.prototype.getPromise = function(container) {\n    return this.timeout(container, this.options.imageTimeout)['catch'](function() {\n        var dummy = new DummyImageContainer(container.src);\n        return dummy.promise.then(function(image) {\n            container.image = image;\n        });\n    });\n};\n\nImageLoader.prototype.get = function(src) {\n    var found = null;\n    return this.images.some(function(img) {\n        return (found = img).src === src;\n    }) ? found : null;\n};\n\nImageLoader.prototype.fetch = function(nodes) {\n    this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\n    this.images.forEach(function(image, index) {\n        image.promise.then(function() {\n            log(\"Succesfully loaded image #\"+ (index+1), image);\n        }, function(e) {\n            log(\"Failed loading image #\"+ (index+1), image, e);\n        });\n    });\n    this.ready = Promise.all(this.images.map(this.getPromise, this));\n    log(\"Finished searching images\");\n    return this;\n};\n\nImageLoader.prototype.timeout = function(container, timeout) {\n    var timer;\n    var promise = Promise.race([container.promise, new Promise(function(res, reject) {\n        timer = setTimeout(function() {\n            log(\"Timed out loading image\", container);\n            reject(container);\n        }, timeout);\n    })]).then(function(container) {\n        clearTimeout(timer);\n        return container;\n    });\n    promise['catch'](function() {\n        clearTimeout(timer);\n    });\n    return promise;\n};\n\nmodule.exports = ImageLoader;\n\n},{\"./dummyimagecontainer\":5,\"./framecontainer\":8,\"./imagecontainer\":10,\"./lineargradientcontainer\":12,\"./log\":13,\"./proxyimagecontainer\":17,\"./svgcontainer\":23,\"./svgnodecontainer\":24,\"./utils\":26,\"./webkitgradientcontainer\":27}],12:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\nvar Color = _dereq_('./color');\n\nfunction LinearGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = GradientContainer.TYPES.LINEAR;\n\n    var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test( imageData.args[0] ) ||\n        !GradientContainer.REGEXP_COLORSTOP.test( imageData.args[0] );\n\n    if (hasDirection) {\n        imageData.args[0].split(/\\s+/).reverse().forEach(function(position, index) {\n            switch(position) {\n            case \"left\":\n                this.x0 = 0;\n                this.x1 = 1;\n                break;\n            case \"top\":\n                this.y0 = 0;\n                this.y1 = 1;\n                break;\n            case \"right\":\n                this.x0 = 1;\n                this.x1 = 0;\n                break;\n            case \"bottom\":\n                this.y0 = 1;\n                this.y1 = 0;\n                break;\n            case \"to\":\n                var y0 = this.y0;\n                var x0 = this.x0;\n                this.y0 = this.y1;\n                this.x0 = this.x1;\n                this.x1 = x0;\n                this.y1 = y0;\n                break;\n            case \"center\":\n                break; // centered by default\n            // Firefox internally converts position keywords to percentages:\n            // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\n            default: // percentage or absolute length\n                // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\n                var ratio = parseFloat(position, 10) * 1e-2;\n                if (isNaN(ratio)) { // invalid or unhandled value\n                    break;\n                }\n                if (index === 0) {\n                    this.y0 = ratio;\n                    this.y1 = 1 - this.y0;\n                } else {\n                    this.x0 = ratio;\n                    this.x1 = 1 - this.x0;\n                }\n                break;\n            }\n        }, this);\n    } else {\n        this.y0 = 0;\n        this.y1 = 1;\n    }\n\n    this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\n        var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\n        var value = +colorStopMatch[2];\n        var unit = value === 0 ? \"%\" : colorStopMatch[3]; // treat \"0\" as \"0%\"\n        return {\n            color: new Color(colorStopMatch[1]),\n            // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\n            stop: unit === \"%\" ? value / 100 : null\n        };\n    });\n\n    if (this.colorStops[0].stop === null) {\n        this.colorStops[0].stop = 0;\n    }\n\n    if (this.colorStops[this.colorStops.length - 1].stop === null) {\n        this.colorStops[this.colorStops.length - 1].stop = 1;\n    }\n\n    // calculates and fills-in explicit stop positions when omitted from rule\n    this.colorStops.forEach(function(colorStop, index) {\n        if (colorStop.stop === null) {\n            this.colorStops.slice(index).some(function(find, count) {\n                if (find.stop !== null) {\n                    colorStop.stop = ((find.stop - this.colorStops[index - 1].stop) / (count + 1)) + this.colorStops[index - 1].stop;\n                    return true;\n                } else {\n                    return false;\n                }\n            }, this);\n        }\n    }, this);\n}\n\nLinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\nLinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\n\nmodule.exports = LinearGradientContainer;\n\n},{\"./color\":3,\"./gradientcontainer\":9}],13:[function(_dereq_,module,exports){\nvar logger = function() {\n    if (logger.options.logging && window.console && window.console.log) {\n        Function.prototype.bind.call(window.console.log, (window.console)).apply(window.console, [(Date.now() - logger.options.start) + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\n    }\n};\n\nlogger.options = {logging: false};\nmodule.exports = logger;\n\n},{}],14:[function(_dereq_,module,exports){\nvar Color = _dereq_('./color');\nvar utils = _dereq_('./utils');\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeContainer(node, parent) {\n    this.node = node;\n    this.parent = parent;\n    this.stack = null;\n    this.bounds = null;\n    this.borders = null;\n    this.clip = [];\n    this.backgroundClip = [];\n    this.offsetBounds = null;\n    this.visible = null;\n    this.computedStyles = null;\n    this.colors = {};\n    this.styles = {};\n    this.backgroundImages = null;\n    this.transformData = null;\n    this.transformMatrix = null;\n    this.isPseudoElement = false;\n    this.opacity = null;\n}\n\nNodeContainer.prototype.cloneTo = function(stack) {\n    stack.visible = this.visible;\n    stack.borders = this.borders;\n    stack.bounds = this.bounds;\n    stack.clip = this.clip;\n    stack.backgroundClip = this.backgroundClip;\n    stack.computedStyles = this.computedStyles;\n    stack.styles = this.styles;\n    stack.backgroundImages = this.backgroundImages;\n    stack.opacity = this.opacity;\n};\n\nNodeContainer.prototype.getOpacity = function() {\n    return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\n};\n\nNodeContainer.prototype.assignStack = function(stack) {\n    this.stack = stack;\n    stack.children.push(this);\n};\n\nNodeContainer.prototype.isElementVisible = function() {\n    return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : (\n        this.css('display') !== \"none\" &&\n        this.css('visibility') !== \"hidden\" &&\n        !this.node.hasAttribute(\"data-html2canvas-ignore\") &&\n        (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\")\n    );\n};\n\nNodeContainer.prototype.css = function(attribute) {\n    if (!this.computedStyles) {\n        this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\n    }\n\n    return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\n};\n\nNodeContainer.prototype.prefixedCss = function(attribute) {\n    var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n    var value = this.css(attribute);\n    if (value === undefined) {\n        prefixes.some(function(prefix) {\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\n            return value !== undefined;\n        }, this);\n    }\n    return value === undefined ? null : value;\n};\n\nNodeContainer.prototype.computedStyle = function(type) {\n    return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\n};\n\nNodeContainer.prototype.cssInt = function(attribute) {\n    var value = parseInt(this.css(attribute), 10);\n    return (isNaN(value)) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\n};\n\nNodeContainer.prototype.color = function(attribute) {\n    return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\n};\n\nNodeContainer.prototype.cssFloat = function(attribute) {\n    var value = parseFloat(this.css(attribute));\n    return (isNaN(value)) ? 0 : value;\n};\n\nNodeContainer.prototype.fontWeight = function() {\n    var weight = this.css(\"fontWeight\");\n    switch(parseInt(weight, 10)){\n    case 401:\n        weight = \"bold\";\n        break;\n    case 400:\n        weight = \"normal\";\n        break;\n    }\n    return weight;\n};\n\nNodeContainer.prototype.parseClip = function() {\n    var matches = this.css('clip').match(this.CLIP);\n    if (matches) {\n        return {\n            top: parseInt(matches[1], 10),\n            right: parseInt(matches[2], 10),\n            bottom: parseInt(matches[3], 10),\n            left: parseInt(matches[4], 10)\n        };\n    }\n    return null;\n};\n\nNodeContainer.prototype.parseBackgroundImages = function() {\n    return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\n};\n\nNodeContainer.prototype.cssList = function(property, index) {\n    var value = (this.css(property) || '').split(',');\n    value = value[index || 0] || value[0] || 'auto';\n    value = value.trim().split(' ');\n    if (value.length === 1) {\n        value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\n    }\n    return value;\n};\n\nNodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\n    var size = this.cssList(\"backgroundSize\", index);\n    var width, height;\n\n    if (isPercentage(size[0])) {\n        width = bounds.width * parseFloat(size[0]) / 100;\n    } else if (/contain|cover/.test(size[0])) {\n        var targetRatio = bounds.width / bounds.height, currentRatio = image.width / image.height;\n        return (targetRatio < currentRatio ^ size[0] === 'contain') ?  {width: bounds.height * currentRatio, height: bounds.height} : {width: bounds.width, height: bounds.width / currentRatio};\n    } else {\n        width = parseInt(size[0], 10);\n    }\n\n    if (size[0] === 'auto' && size[1] === 'auto') {\n        height = image.height;\n    } else if (size[1] === 'auto') {\n        height = width / image.width * image.height;\n    } else if (isPercentage(size[1])) {\n        height =  bounds.height * parseFloat(size[1]) / 100;\n    } else {\n        height = parseInt(size[1], 10);\n    }\n\n    if (size[0] === 'auto') {\n        width = height / image.height * image.width;\n    }\n\n    return {width: width, height: height};\n};\n\nNodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\n    var position = this.cssList('backgroundPosition', index);\n    var left, top;\n\n    if (isPercentage(position[0])){\n        left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\n    } else {\n        left = parseInt(position[0], 10);\n    }\n\n    if (position[1] === 'auto') {\n        top = left / image.width * image.height;\n    } else if (isPercentage(position[1])){\n        top =  (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\n    } else {\n        top = parseInt(position[1], 10);\n    }\n\n    if (position[0] === 'auto') {\n        left = top / image.height * image.width;\n    }\n\n    return {left: left, top: top};\n};\n\nNodeContainer.prototype.parseBackgroundRepeat = function(index) {\n    return this.cssList(\"backgroundRepeat\", index)[0];\n};\n\nNodeContainer.prototype.parseTextShadows = function() {\n    var textShadow = this.css(\"textShadow\");\n    var results = [];\n\n    if (textShadow && textShadow !== 'none') {\n        var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\n        for (var i = 0; shadows && (i < shadows.length); i++) {\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\n            results.push({\n                color: new Color(s[0]),\n                offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\n                offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\n                blur: s[3] ? s[3].replace('px', '') : 0\n            });\n        }\n    }\n    return results;\n};\n\nNodeContainer.prototype.parseTransform = function() {\n    if (!this.transformData) {\n        if (this.hasTransform()) {\n            var offset = this.parseBounds();\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\n            origin[0] += offset.left;\n            origin[1] += offset.top;\n            this.transformData = {\n                origin: origin,\n                matrix: this.parseTransformMatrix()\n            };\n        } else {\n            this.transformData = {\n                origin: [0, 0],\n                matrix: [1, 0, 0, 1, 0, 0]\n            };\n        }\n    }\n    return this.transformData;\n};\n\nNodeContainer.prototype.parseTransformMatrix = function() {\n    if (!this.transformMatrix) {\n        var transform = this.prefixedCss(\"transform\");\n        var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\n        this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\n    }\n    return this.transformMatrix;\n};\n\nNodeContainer.prototype.parseBounds = function() {\n    return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\n};\n\nNodeContainer.prototype.hasTransform = function() {\n    return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || (this.parent && this.parent.hasTransform());\n};\n\nNodeContainer.prototype.getValue = function() {\n    var value = this.node.value || \"\";\n    if (this.node.tagName === \"SELECT\") {\n        value = selectionValue(this.node);\n    } else if (this.node.type === \"password\") {\n        value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\n    }\n    return value.length === 0 ? (this.node.placeholder || \"\") : value;\n};\n\nNodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\nNodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\nNodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\nNodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\n\nfunction selectionValue(node) {\n    var option = node.options[node.selectedIndex || 0];\n    return option ? (option.text || \"\") : \"\";\n}\n\nfunction parseMatrix(match) {\n    if (match && match[1] === \"matrix\") {\n        return match[2].split(\",\").map(function(s) {\n            return parseFloat(s.trim());\n        });\n    } else if (match && match[1] === \"matrix3d\") {\n        var matrix3d = match[2].split(\",\").map(function(s) {\n          return parseFloat(s.trim());\n        });\n        return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\n    }\n}\n\nfunction isPercentage(value) {\n    return value.toString().indexOf(\"%\") !== -1;\n}\n\nfunction removePx(str) {\n    return str.replace(\"px\", \"\");\n}\n\nfunction asFloat(str) {\n    return parseFloat(str);\n}\n\nmodule.exports = NodeContainer;\n\n},{\"./color\":3,\"./utils\":26}],15:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\nvar punycode = _dereq_('punycode');\nvar NodeContainer = _dereq_('./nodecontainer');\nvar TextContainer = _dereq_('./textcontainer');\nvar PseudoElementContainer = _dereq_('./pseudoelementcontainer');\nvar FontMetrics = _dereq_('./fontmetrics');\nvar Color = _dereq_('./color');\nvar StackingContext = _dereq_('./stackingcontext');\nvar utils = _dereq_('./utils');\nvar bind = utils.bind;\nvar getBounds = utils.getBounds;\nvar parseBackgrounds = utils.parseBackgrounds;\nvar offsetBounds = utils.offsetBounds;\n\nfunction NodeParser(element, renderer, support, imageLoader, options) {\n    log(\"Starting NodeParser\");\n    this.renderer = renderer;\n    this.options = options;\n    this.range = null;\n    this.support = support;\n    this.renderQueue = [];\n    this.stack = new StackingContext(true, 1, element.ownerDocument, null);\n    var parent = new NodeContainer(element, null);\n    if (options.background) {\n        renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\n    }\n    if (element === element.ownerDocument.documentElement) {\n        // http://www.w3.org/TR/css3-background/#special-backgrounds\n        var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\n        renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\n    }\n    parent.visibile = parent.isElementVisible();\n    this.createPseudoHideStyles(element.ownerDocument);\n    this.disableAnimations(element.ownerDocument);\n    this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function(container) {\n        return container.visible = container.isElementVisible();\n    }).map(this.getPseudoElements, this));\n    this.fontMetrics = new FontMetrics();\n    log(\"Fetched nodes, total:\", this.nodes.length);\n    log(\"Calculate overflow clips\");\n    this.calculateOverflowClips();\n    log(\"Start fetching images\");\n    this.images = imageLoader.fetch(this.nodes.filter(isElement));\n    this.ready = this.images.ready.then(bind(function() {\n        log(\"Images loaded, starting parsing\");\n        log(\"Creating stacking contexts\");\n        this.createStackingContexts();\n        log(\"Sorting stacking contexts\");\n        this.sortStackingContexts(this.stack);\n        this.parse(this.stack);\n        log(\"Render queue created with \" + this.renderQueue.length + \" items\");\n        return new Promise(bind(function(resolve) {\n            if (!options.async) {\n                this.renderQueue.forEach(this.paint, this);\n                resolve();\n            } else if (typeof(options.async) === \"function\") {\n                options.async.call(this, this.renderQueue, resolve);\n            } else if (this.renderQueue.length > 0){\n                this.renderIndex = 0;\n                this.asyncRenderer(this.renderQueue, resolve);\n            } else {\n                resolve();\n            }\n        }, this));\n    }, this));\n}\n\nNodeParser.prototype.calculateOverflowClips = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container)) {\n            if (isPseudoElement(container)) {\n                container.appendToDOM();\n            }\n            container.borders = this.parseBorders(container);\n            var clip = (container.css('overflow') === \"hidden\") ? [container.borders.clip] : [];\n            var cssClip = container.parseClip();\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\n                clip.push([[\"rect\",\n                        container.bounds.left + cssClip.left,\n                        container.bounds.top + cssClip.top,\n                        cssClip.right - cssClip.left,\n                        cssClip.bottom - cssClip.top\n                ]]);\n            }\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\n            container.backgroundClip = (container.css('overflow') !== \"hidden\") ? container.clip.concat([container.borders.clip]) : container.clip;\n            if (isPseudoElement(container)) {\n                container.cleanDOM();\n            }\n        } else if (isTextNode(container)) {\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\n        }\n        if (!isPseudoElement(container)) {\n            container.bounds = null;\n        }\n    }, this);\n};\n\nfunction hasParentClip(container) {\n    return container.parent && container.parent.clip.length;\n}\n\nNodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\n    asyncTimer = asyncTimer || Date.now();\n    this.paint(queue[this.renderIndex++]);\n    if (queue.length === this.renderIndex) {\n        resolve();\n    } else if (asyncTimer + 20 > Date.now()) {\n        this.asyncRenderer(queue, resolve, asyncTimer);\n    } else {\n        setTimeout(bind(function() {\n            this.asyncRenderer(queue, resolve);\n        }, this), 0);\n    }\n};\n\nNodeParser.prototype.createPseudoHideStyles = function(document) {\n    this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' +\n        '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\n};\n\nNodeParser.prototype.disableAnimations = function(document) {\n    this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\n        '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\n};\n\nNodeParser.prototype.createStyles = function(document, styles) {\n    var hidePseudoElements = document.createElement('style');\n    hidePseudoElements.innerHTML = styles;\n    document.body.appendChild(hidePseudoElements);\n};\n\nNodeParser.prototype.getPseudoElements = function(container) {\n    var nodes = [[container]];\n    if (container.node.nodeType === Node.ELEMENT_NODE) {\n        var before = this.getPseudoElement(container, \":before\");\n        var after = this.getPseudoElement(container, \":after\");\n\n        if (before) {\n            nodes.push(before);\n        }\n\n        if (after) {\n            nodes.push(after);\n        }\n    }\n    return flatten(nodes);\n};\n\nfunction toCamelCase(str) {\n    return str.replace(/(\\-[a-z])/g, function(match){\n        return match.toUpperCase().replace('-','');\n    });\n}\n\nNodeParser.prototype.getPseudoElement = function(container, type) {\n    var style = container.computedStyle(type);\n    if(!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\n        return null;\n    }\n\n    var content = stripQuotes(style.content);\n    var isImage = content.substr(0, 3) === 'url';\n    var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\n    var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\n\n    for (var i = style.length-1; i >= 0; i--) {\n        var property = toCamelCase(style.item(i));\n        pseudoNode.style[property] = style[property];\n    }\n\n    pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n\n    if (isImage) {\n        pseudoNode.src = parseBackgrounds(content)[0].args[0];\n        return [pseudoContainer];\n    } else {\n        var text = document.createTextNode(content);\n        pseudoNode.appendChild(text);\n        return [pseudoContainer, new TextContainer(text, pseudoContainer)];\n    }\n};\n\n\nNodeParser.prototype.getChildren = function(parentContainer) {\n    return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\n        var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\n        return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? (container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : []) : container;\n    }, this));\n};\n\nNodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\n    var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\n    container.cloneTo(stack);\n    var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\n    parentStack.contexts.push(stack);\n    container.stack = stack;\n};\n\nNodeParser.prototype.createStackingContexts = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\n            this.newStackingContext(container, true);\n        } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\n            this.newStackingContext(container, false);\n        } else {\n            container.assignStack(container.parent.stack);\n        }\n    }, this);\n};\n\nNodeParser.prototype.isBodyWithTransparentRoot = function(container) {\n    return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\n};\n\nNodeParser.prototype.isRootElement = function(container) {\n    return container.parent === null;\n};\n\nNodeParser.prototype.sortStackingContexts = function(stack) {\n    stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\n    stack.contexts.forEach(this.sortStackingContexts, this);\n};\n\nNodeParser.prototype.parseTextBounds = function(container) {\n    return function(text, index, textList) {\n        if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\n                var offset = textList.slice(0, index).join(\"\").length;\n                return this.getRangeBounds(container.node, offset, text.length);\n            } else if (container.node && typeof(container.node.data) === \"string\") {\n                var replacementNode = container.node.splitText(text.length);\n                var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\n                container.node = replacementNode;\n                return bounds;\n            }\n        } else if(!this.support.rangeBounds || container.parent.hasTransform()){\n            container.node = container.node.splitText(text.length);\n        }\n        return {};\n    };\n};\n\nNodeParser.prototype.getWrapperBounds = function(node, transform) {\n    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\n    var parent = node.parentNode,\n        backupText = node.cloneNode(true);\n\n    wrapper.appendChild(node.cloneNode(true));\n    parent.replaceChild(wrapper, node);\n    var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\n    parent.replaceChild(backupText, wrapper);\n    return bounds;\n};\n\nNodeParser.prototype.getRangeBounds = function(node, offset, length) {\n    var range = this.range || (this.range = node.ownerDocument.createRange());\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range.getBoundingClientRect();\n};\n\nfunction ClearTransform() {}\n\nNodeParser.prototype.parse = function(stack) {\n    // http://www.w3.org/TR/CSS21/visuren.html#z-index\n    var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\n    var descendantElements = stack.children.filter(isElement);\n    var descendantNonFloats = descendantElements.filter(not(isFloating));\n    var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\n    var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\n    var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n    var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\n    var text = stack.children.filter(isTextNode).filter(hasText);\n    var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\n    negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats)\n        .concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container) {\n            this.renderQueue.push(container);\n            if (isStackingContext(container)) {\n                this.parse(container);\n                this.renderQueue.push(new ClearTransform());\n            }\n        }, this);\n};\n\nNodeParser.prototype.paint = function(container) {\n    try {\n        if (container instanceof ClearTransform) {\n            this.renderer.ctx.restore();\n        } else if (isTextNode(container)) {\n            if (isPseudoElement(container.parent)) {\n                container.parent.appendToDOM();\n            }\n            this.paintText(container);\n            if (isPseudoElement(container.parent)) {\n                container.parent.cleanDOM();\n            }\n        } else {\n            this.paintNode(container);\n        }\n    } catch(e) {\n        log(e);\n        if (this.options.strict) {\n            throw e;\n        }\n    }\n};\n\nNodeParser.prototype.paintNode = function(container) {\n    if (isStackingContext(container)) {\n        this.renderer.setOpacity(container.opacity);\n        this.renderer.ctx.save();\n        if (container.hasTransform()) {\n            this.renderer.setTransform(container.parseTransform());\n        }\n    }\n\n    if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\n        this.paintCheckbox(container);\n    } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\n        this.paintRadio(container);\n    } else {\n        this.paintElement(container);\n    }\n};\n\nNodeParser.prototype.paintElement = function(container) {\n    var bounds = container.parseBounds();\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\n    }, this);\n\n    this.renderer.clip(container.clip, function() {\n        this.renderer.renderBorders(container.borders.borders);\n    }, this);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        switch (container.node.nodeName) {\n        case \"svg\":\n        case \"IFRAME\":\n            var imgContainer = this.images.get(container.node);\n            if (imgContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\n            } else {\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\n            }\n            break;\n        case \"IMG\":\n            var imageContainer = this.images.get(container.node.src);\n            if (imageContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\n            } else {\n                log(\"Error loading <img>\", container.node.src);\n            }\n            break;\n        case \"CANVAS\":\n            this.renderer.renderImage(container, bounds, container.borders, {image: container.node});\n            break;\n        case \"SELECT\":\n        case \"INPUT\":\n        case \"TEXTAREA\":\n            this.paintFormValue(container);\n            break;\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintCheckbox = function(container) {\n    var b = container.parseBounds();\n\n    var size = Math.min(b.width, b.height);\n    var bounds = {width: size - 1, height: size - 1, top: b.top, left: b.left};\n    var r = [3, 3];\n    var radius = [r, r, r, r];\n    var borders = [1,1,1,1].map(function(w) {\n        return {color: new Color('#A5A5A5'), width: w};\n    });\n\n    var borderPoints = calculateCurvePoints(bounds, radius, borders);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\n        this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\n        if (container.node.checked) {\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', (size - 3) + \"px\", 'arial');\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintRadio = function(container) {\n    var bounds = container.parseBounds();\n\n    var size = Math.min(bounds.width, bounds.height) - 2;\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\n        if (container.node.checked) {\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintFormValue = function(container) {\n    var value = container.getValue();\n    if (value.length > 0) {\n        var document = container.node.ownerDocument;\n        var wrapper = document.createElement('html2canvaswrapper');\n        var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color',\n            'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom',\n            'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth',\n            'boxSizing', 'whiteSpace', 'wordWrap'];\n\n        properties.forEach(function(property) {\n            try {\n                wrapper.style[property] = container.css(property);\n            } catch(e) {\n                // Older IE has issues with \"border\"\n                log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\n            }\n        });\n        var bounds = container.parseBounds();\n        wrapper.style.position = \"fixed\";\n        wrapper.style.left = bounds.left + \"px\";\n        wrapper.style.top = bounds.top + \"px\";\n        wrapper.textContent = value;\n        document.body.appendChild(wrapper);\n        this.paintText(new TextContainer(wrapper.firstChild, container));\n        document.body.removeChild(wrapper);\n    }\n};\n\nNodeParser.prototype.paintText = function(container) {\n    container.applyTextTransform();\n    var characters = punycode.ucs2.decode(container.node.data);\n    var textList = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data) ? getWords(characters) : characters.map(function(character) {\n        return punycode.ucs2.encode([character]);\n    });\n\n    var weight = container.parent.fontWeight();\n    var size = container.parent.css('fontSize');\n    var family = container.parent.css('fontFamily');\n    var shadows = container.parent.parseTextShadows();\n\n    this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\n    if (shadows.length) {\n        // TODO: support multiple text shadows\n        this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\n    } else {\n        this.renderer.clearShadow();\n    }\n\n    this.renderer.clip(container.parent.clip, function() {\n        textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\n            if (bounds) {\n                this.renderer.text(textList[index], bounds.left, bounds.bottom);\n                this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\n            }\n        }, this);\n    }, this);\n};\n\nNodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\n    switch(container.css(\"textDecoration\").split(\" \")[0]) {\n    case \"underline\":\n        // Draws a line at the baseline of the font\n        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"overline\":\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"line-through\":\n        // TODO try and find exact position for line-through\n        this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    }\n};\n\nvar borderColorTransforms = {\n    inset: [\n        [\"darken\", 0.60],\n        [\"darken\", 0.10],\n        [\"darken\", 0.10],\n        [\"darken\", 0.60]\n    ]\n};\n\nNodeParser.prototype.parseBorders = function(container) {\n    var nodeBounds = container.parseBounds();\n    var radius = getBorderRadiusData(container);\n    var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function(side, index) {\n        var style = container.css('border' + side + 'Style');\n        var color = container.color('border' + side + 'Color');\n        if (style === \"inset\" && color.isBlack()) {\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\n        }\n        var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\n        return {\n            width: container.cssInt('border' + side + 'Width'),\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\n            args: null\n        };\n    });\n    var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\n\n    return {\n        clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\n        borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\n    };\n};\n\nfunction calculateBorders(borders, nodeBounds, borderPoints, radius) {\n    return borders.map(function(border, borderSide) {\n        if (border.width > 0) {\n            var bx = nodeBounds.left;\n            var by = nodeBounds.top;\n            var bw = nodeBounds.width;\n            var bh = nodeBounds.height - (borders[2].width);\n\n            switch(borderSide) {\n            case 0:\n                // top border\n                bh = borders[0].width;\n                border.args = drawSide({\n                        c1: [bx, by],\n                        c2: [bx + bw, by],\n                        c3: [bx + bw - borders[1].width, by + bh],\n                        c4: [bx + borders[3].width, by + bh]\n                    }, radius[0], radius[1],\n                    borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\n                break;\n            case 1:\n                // right border\n                bx = nodeBounds.left + nodeBounds.width - (borders[1].width);\n                bw = borders[1].width;\n\n                border.args = drawSide({\n                        c1: [bx + bw, by],\n                        c2: [bx + bw, by + bh + borders[2].width],\n                        c3: [bx, by + bh],\n                        c4: [bx, by + borders[0].width]\n                    }, radius[1], radius[2],\n                    borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\n                break;\n            case 2:\n                // bottom border\n                by = (by + nodeBounds.height) - (borders[2].width);\n                bh = borders[2].width;\n                border.args = drawSide({\n                        c1: [bx + bw, by + bh],\n                        c2: [bx, by + bh],\n                        c3: [bx + borders[3].width, by],\n                        c4: [bx + bw - borders[3].width, by]\n                    }, radius[2], radius[3],\n                    borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\n                break;\n            case 3:\n                // left border\n                bw = borders[3].width;\n                border.args = drawSide({\n                        c1: [bx, by + bh + borders[2].width],\n                        c2: [bx, by],\n                        c3: [bx + bw, by + borders[0].width],\n                        c4: [bx + bw, by + bh]\n                    }, radius[3], radius[0],\n                    borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\n                break;\n            }\n        }\n        return border;\n    });\n}\n\nNodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\n    var backgroundClip = container.css('backgroundClip'),\n        borderArgs = [];\n\n    switch(backgroundClip) {\n    case \"content-box\":\n    case \"padding-box\":\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\n        break;\n\n    default:\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\n        break;\n    }\n\n    return borderArgs;\n};\n\nfunction getCurvePoints(x, y, r1, r2) {\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    var ox = (r1) * kappa, // control point offset horizontal\n        oy = (r2) * kappa, // control point offset vertical\n        xm = x + r1, // x-middle\n        ym = y + r2; // y-middle\n    return {\n        topLeft: bezierCurve({x: x, y: ym}, {x: x, y: ym - oy}, {x: xm - ox, y: y}, {x: xm, y: y}),\n        topRight: bezierCurve({x: x, y: y}, {x: x + ox,y: y}, {x: xm, y: ym - oy}, {x: xm, y: ym}),\n        bottomRight: bezierCurve({x: xm, y: y}, {x: xm, y: y + oy}, {x: x + ox, y: ym}, {x: x, y: ym}),\n        bottomLeft: bezierCurve({x: xm, y: ym}, {x: xm - ox, y: ym}, {x: x, y: y + oy}, {x: x, y:y})\n    };\n}\n\nfunction calculateCurvePoints(bounds, borderRadius, borders) {\n    var x = bounds.left,\n        y = bounds.top,\n        width = bounds.width,\n        height = bounds.height,\n\n        tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\n        tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\n        trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\n        trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\n        brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\n        brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\n        blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\n        blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\n\n    var topWidth = width - trh,\n        rightHeight = height - brv,\n        bottomWidth = width - brh,\n        leftHeight = height - blv;\n\n    return {\n        topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\n        topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\n        topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\n        topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\n        bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\n        bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width),  brv - borders[2].width).bottomRight.subdivide(0.5),\n        bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\n        bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\n    };\n}\n\nfunction bezierCurve(start, startControl, endControl, end) {\n    var lerp = function (a, b, t) {\n        return {\n            x: a.x + (b.x - a.x) * t,\n            y: a.y + (b.y - a.y) * t\n        };\n    };\n\n    return {\n        start: start,\n        startControl: startControl,\n        endControl: endControl,\n        end: end,\n        subdivide: function(t) {\n            var ab = lerp(start, startControl, t),\n                bc = lerp(startControl, endControl, t),\n                cd = lerp(endControl, end, t),\n                abbc = lerp(ab, bc, t),\n                bccd = lerp(bc, cd, t),\n                dest = lerp(abbc, bccd, t);\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\n        },\n        curveTo: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\n        },\n        curveToReversed: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\n        }\n    };\n}\n\nfunction drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\n    var borderArgs = [];\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\n        outer1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\n        outer2[0].curveTo(borderArgs);\n        borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\n        inner2[0].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\n        borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\n    }\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\n        inner1[1].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\n    }\n\n    return borderArgs;\n}\n\nfunction parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\n        corner1[0].curveTo(borderArgs);\n        corner1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([\"line\", x, y]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\n    }\n}\n\nfunction negativeZIndex(container) {\n    return container.cssInt(\"zIndex\") < 0;\n}\n\nfunction positiveZIndex(container) {\n    return container.cssInt(\"zIndex\") > 0;\n}\n\nfunction zIndex0(container) {\n    return container.cssInt(\"zIndex\") === 0;\n}\n\nfunction inlineLevel(container) {\n    return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction isStackingContext(container) {\n    return (container instanceof StackingContext);\n}\n\nfunction hasText(container) {\n    return container.node.data.trim().length > 0;\n}\n\nfunction noLetterSpacing(container) {\n    return (/^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\")));\n}\n\nfunction getBorderRadiusData(container) {\n    return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function(side) {\n        var value = container.css('border' + side + 'Radius');\n        var arr = value.split(\" \");\n        if (arr.length <= 1) {\n            arr[1] = arr[0];\n        }\n        return arr.map(asInt);\n    });\n}\n\nfunction renderableNode(node) {\n    return (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE);\n}\n\nfunction isPositionedForStacking(container) {\n    var position = container.css(\"position\");\n    var zIndex = ([\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1) ? container.css(\"zIndex\") : \"auto\";\n    return zIndex !== \"auto\";\n}\n\nfunction isPositioned(container) {\n    return container.css(\"position\") !== \"static\";\n}\n\nfunction isFloating(container) {\n    return container.css(\"float\") !== \"none\";\n}\n\nfunction isInlineBlock(container) {\n    return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction not(callback) {\n    var context = this;\n    return function() {\n        return !callback.apply(context, arguments);\n    };\n}\n\nfunction isElement(container) {\n    return container.node.nodeType === Node.ELEMENT_NODE;\n}\n\nfunction isPseudoElement(container) {\n    return container.isPseudoElement === true;\n}\n\nfunction isTextNode(container) {\n    return container.node.nodeType === Node.TEXT_NODE;\n}\n\nfunction zIndexSort(contexts) {\n    return function(a, b) {\n        return (a.cssInt(\"zIndex\") + (contexts.indexOf(a) / contexts.length)) - (b.cssInt(\"zIndex\") + (contexts.indexOf(b) / contexts.length));\n    };\n}\n\nfunction hasOpacity(container) {\n    return container.getOpacity() < 1;\n}\n\nfunction asInt(value) {\n    return parseInt(value, 10);\n}\n\nfunction getWidth(border) {\n    return border.width;\n}\n\nfunction nonIgnoredElement(nodeContainer) {\n    return (nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1);\n}\n\nfunction flatten(arrays) {\n    return [].concat.apply([], arrays);\n}\n\nfunction stripQuotes(content) {\n    var first = content.substr(0, 1);\n    return (first === content.substr(content.length - 1) && first.match(/'|\"/)) ? content.substr(1, content.length - 2) : content;\n}\n\nfunction getWords(characters) {\n    var words = [], i = 0, onWordBoundary = false, word;\n    while(characters.length) {\n        if (isWordBoundary(characters[i]) === onWordBoundary) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n            onWordBoundary =! onWordBoundary;\n            i = 0;\n        } else {\n            i++;\n        }\n\n        if (i >= characters.length) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(punycode.ucs2.encode(word));\n            }\n        }\n    }\n    return words;\n}\n\nfunction isWordBoundary(characterCode) {\n    return [\n        32, // <space>\n        13, // \\r\n        10, // \\n\n        9, // \\t\n        45 // -\n    ].indexOf(characterCode) !== -1;\n}\n\nfunction hasUnicode(string) {\n    return (/[^\\u0000-\\u00ff]/).test(string);\n}\n\nmodule.exports = NodeParser;\n\n},{\"./color\":3,\"./fontmetrics\":7,\"./log\":13,\"./nodecontainer\":14,\"./pseudoelementcontainer\":18,\"./stackingcontext\":21,\"./textcontainer\":25,\"./utils\":26,\"punycode\":1}],16:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar utils = _dereq_('./utils');\nvar log = _dereq_('./log');\nvar createWindowClone = _dereq_('./clone');\nvar decode64 = utils.decode64;\n\nfunction Proxy(src, proxyUrl, document) {\n    var supportsCORS = ('withCredentials' in new XMLHttpRequest());\n    if (!proxyUrl) {\n        return Promise.reject(\"No proxy configured\");\n    }\n    var callback = createCallback(supportsCORS);\n    var url = createProxyUrl(proxyUrl, src, callback);\n\n    return supportsCORS ? XHR(url) : (jsonp(document, url, callback).then(function(response) {\n        return decode64(response.content);\n    }));\n}\nvar proxyCount = 0;\n\nfunction ProxyURL(src, proxyUrl, document) {\n    var supportsCORSImage = ('crossOrigin' in new Image());\n    var callback = createCallback(supportsCORSImage);\n    var url = createProxyUrl(proxyUrl, src, callback);\n    return (supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function(response) {\n        return \"data:\" + response.type + \";base64,\" + response.content;\n    }));\n}\n\nfunction jsonp(document, url, callback) {\n    return new Promise(function(resolve, reject) {\n        var s = document.createElement(\"script\");\n        var cleanup = function() {\n            delete window.html2canvas.proxy[callback];\n            document.body.removeChild(s);\n        };\n        window.html2canvas.proxy[callback] = function(response) {\n            cleanup();\n            resolve(response);\n        };\n        s.src = url;\n        s.onerror = function(e) {\n            cleanup();\n            reject(e);\n        };\n        document.body.appendChild(s);\n    });\n}\n\nfunction createCallback(useCORS) {\n    return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + (++proxyCount) + \"_\" + Math.round(Math.random() * 100000) : \"\";\n}\n\nfunction createProxyUrl(proxyUrl, src, callback) {\n    return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\n}\n\nfunction documentFromHTML(src) {\n    return function(html) {\n        var parser = new DOMParser(), doc;\n        try {\n            doc = parser.parseFromString(html, \"text/html\");\n        } catch(e) {\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\n            doc = document.implementation.createHTMLDocument(\"\");\n            try {\n                doc.open();\n                doc.write(html);\n                doc.close();\n            } catch(ee) {\n                log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\n                doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\n            }\n        }\n\n        var b = doc.querySelector(\"base\");\n        if (!b || !b.href.host) {\n            var base = doc.createElement(\"base\");\n            base.href = src;\n            doc.head.insertBefore(base, doc.head.firstChild);\n        }\n\n        return doc;\n    };\n}\n\nfunction loadUrlDocument(src, proxy, document, width, height, options) {\n    return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\n        return createWindowClone(doc, document, width, height, options, 0, 0);\n    });\n}\n\nexports.Proxy = Proxy;\nexports.ProxyURL = ProxyURL;\nexports.loadUrlDocument = loadUrlDocument;\n\n},{\"./clone\":2,\"./log\":13,\"./utils\":26,\"./xhr\":28}],17:[function(_dereq_,module,exports){\nvar ProxyURL = _dereq_('./proxy').ProxyURL;\n\nfunction ProxyImageContainer(src, proxy) {\n    var link = document.createElement(\"a\");\n    link.href = src;\n    src = link.href;\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.crossOrigin = \"Anonymous\";\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n\n        new ProxyURL(src, proxy, document).then(function(url) {\n            self.image.src = url;\n        })['catch'](reject);\n    });\n}\n\nmodule.exports = ProxyImageContainer;\n\n},{\"./proxy\":16}],18:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction PseudoElementContainer(node, parent, type) {\n    NodeContainer.call(this, node, parent);\n    this.isPseudoElement = true;\n    this.before = type === \":before\";\n}\n\nPseudoElementContainer.prototype.cloneTo = function(stack) {\n    PseudoElementContainer.prototype.cloneTo.call(this, stack);\n    stack.isPseudoElement = true;\n    stack.before = this.before;\n};\n\nPseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\n\nPseudoElementContainer.prototype.appendToDOM = function() {\n    if (this.before) {\n        this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\n    } else {\n        this.parent.node.appendChild(this.node);\n    }\n    this.parent.node.className += \" \" + this.getHideClass();\n};\n\nPseudoElementContainer.prototype.cleanDOM = function() {\n    this.node.parentNode.removeChild(this.node);\n    this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\n};\n\nPseudoElementContainer.prototype.getHideClass = function() {\n    return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\n};\n\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\n\nmodule.exports = PseudoElementContainer;\n\n},{\"./nodecontainer\":14}],19:[function(_dereq_,module,exports){\nvar log = _dereq_('./log');\n\nfunction Renderer(width, height, images, options, document) {\n    this.width = width;\n    this.height = height;\n    this.images = images;\n    this.options = options;\n    this.document = document;\n}\n\nRenderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\n    var paddingLeft = container.cssInt('paddingLeft'),\n        paddingTop = container.cssInt('paddingTop'),\n        paddingRight = container.cssInt('paddingRight'),\n        paddingBottom = container.cssInt('paddingBottom'),\n        borders = borderData.borders;\n\n    var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\n    var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\n    this.drawImage(\n        imageContainer,\n        0,\n        0,\n        imageContainer.image.width || width,\n        imageContainer.image.height || height,\n        bounds.left + paddingLeft + borders[3].width,\n        bounds.top + paddingTop + borders[0].width,\n        width,\n        height\n    );\n};\n\nRenderer.prototype.renderBackground = function(container, bounds, borderData) {\n    if (bounds.height > 0 && bounds.width > 0) {\n        this.renderBackgroundColor(container, bounds);\n        this.renderBackgroundImage(container, bounds, borderData);\n    }\n};\n\nRenderer.prototype.renderBackgroundColor = function(container, bounds) {\n    var color = container.color(\"backgroundColor\");\n    if (!color.isTransparent()) {\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\n    }\n};\n\nRenderer.prototype.renderBorders = function(borders) {\n    borders.forEach(this.renderBorder, this);\n};\n\nRenderer.prototype.renderBorder = function(data) {\n    if (!data.color.isTransparent() && data.args !== null) {\n        this.drawShape(data.args, data.color);\n    }\n};\n\nRenderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\n    var backgroundImages = container.parseBackgroundImages();\n    backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\n        switch(backgroundImage.method) {\n        case \"url\":\n            var image = this.images.get(backgroundImage.args[0]);\n            if (image) {\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index+1), borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"linear-gradient\":\n        case \"gradient\":\n            var gradientImage = this.images.get(backgroundImage.value);\n            if (gradientImage) {\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"none\":\n            break;\n        default:\n            log(\"Unknown background-image type\", backgroundImage.args[0]);\n        }\n    }, this);\n};\n\nRenderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\n    var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\n    var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\n    var repeat = container.parseBackgroundRepeat(index);\n    switch (repeat) {\n    case \"repeat-x\":\n    case \"repeat no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\n        break;\n    case \"repeat-y\":\n    case \"no-repeat repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\n        break;\n    case \"no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\n        break;\n    default:\n        this.renderBackgroundRepeat(imageContainer, position, size, {top: bounds.top, left: bounds.left}, borderData[3], borderData[0]);\n        break;\n    }\n};\n\nmodule.exports = Renderer;\n\n},{\"./log\":13}],20:[function(_dereq_,module,exports){\nvar Renderer = _dereq_('../renderer');\nvar LinearGradientContainer = _dereq_('../lineargradientcontainer');\nvar log = _dereq_('../log');\n\nfunction CanvasRenderer(width, height) {\n    Renderer.apply(this, arguments);\n    this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\n    if (!this.options.canvas) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n    }\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\n    this.ctx.textBaseline = \"bottom\";\n    this.variables = {};\n    log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\n}\n\nCanvasRenderer.prototype = Object.create(Renderer.prototype);\n\nCanvasRenderer.prototype.setFillStyle = function(fillStyle) {\n    this.ctx.fillStyle = typeof(fillStyle) === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\n    this.setFillStyle(color).fillRect(left, top, width, height);\n};\n\nCanvasRenderer.prototype.circle = function(left, top, size, color) {\n    this.setFillStyle(color);\n    this.ctx.beginPath();\n    this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI*2, true);\n    this.ctx.closePath();\n    this.ctx.fill();\n};\n\nCanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\n    this.circle(left, top, size, color);\n    this.ctx.strokeStyle = strokeColor.toString();\n    this.ctx.stroke();\n};\n\nCanvasRenderer.prototype.drawShape = function(shape, color) {\n    this.shape(shape);\n    this.setFillStyle(color).fill();\n};\n\nCanvasRenderer.prototype.taints = function(imageContainer) {\n    if (imageContainer.tainted === null) {\n        this.taintCtx.drawImage(imageContainer.image, 0, 0);\n        try {\n            this.taintCtx.getImageData(0, 0, 1, 1);\n            imageContainer.tainted = false;\n        } catch(e) {\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\n            imageContainer.tainted = true;\n        }\n    }\n\n    return imageContainer.tainted;\n};\n\nCanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\n    if (!this.taints(imageContainer) || this.options.allowTaint) {\n        this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\n    }\n};\n\nCanvasRenderer.prototype.clip = function(shapes, callback, context) {\n    this.ctx.save();\n    shapes.filter(hasEntries).forEach(function(shape) {\n        this.shape(shape).clip();\n    }, this);\n    callback.call(context);\n    this.ctx.restore();\n};\n\nCanvasRenderer.prototype.shape = function(shape) {\n    this.ctx.beginPath();\n    shape.forEach(function(point, index) {\n        if (point[0] === \"rect\") {\n            this.ctx.rect.apply(this.ctx, point.slice(1));\n        } else {\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\n        }\n    }, this);\n    this.ctx.closePath();\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\n    this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\n};\n\nCanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\n    this.setVariable(\"shadowColor\", color.toString())\n        .setVariable(\"shadowOffsetY\", offsetX)\n        .setVariable(\"shadowOffsetX\", offsetY)\n        .setVariable(\"shadowBlur\", blur);\n};\n\nCanvasRenderer.prototype.clearShadow = function() {\n    this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\n};\n\nCanvasRenderer.prototype.setOpacity = function(opacity) {\n    this.ctx.globalAlpha = opacity;\n};\n\nCanvasRenderer.prototype.setTransform = function(transform) {\n    this.ctx.translate(transform.origin[0], transform.origin[1]);\n    this.ctx.transform.apply(this.ctx, transform.matrix);\n    this.ctx.translate(-transform.origin[0], -transform.origin[1]);\n};\n\nCanvasRenderer.prototype.setVariable = function(property, value) {\n    if (this.variables[property] !== value) {\n        this.variables[property] = this.ctx[property] = value;\n    }\n\n    return this;\n};\n\nCanvasRenderer.prototype.text = function(text, left, bottom) {\n    this.ctx.fillText(text, left, bottom);\n};\n\nCanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\n    var shape = [\n        [\"line\", Math.round(left), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(height + top)],\n        [\"line\", Math.round(left), Math.round(height + top)]\n    ];\n    this.clip([shape], function() {\n        this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\n    }, this);\n};\n\nCanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\n    var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft), offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\n    this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\n    this.ctx.translate(offsetX, offsetY);\n    this.ctx.fill();\n    this.ctx.translate(-offsetX, -offsetY);\n};\n\nCanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\n    if (gradientImage instanceof LinearGradientContainer) {\n        var gradient = this.ctx.createLinearGradient(\n            bounds.left + bounds.width * gradientImage.x0,\n            bounds.top + bounds.height * gradientImage.y0,\n            bounds.left +  bounds.width * gradientImage.x1,\n            bounds.top +  bounds.height * gradientImage.y1);\n        gradientImage.colorStops.forEach(function(colorStop) {\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\n        });\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\n    }\n};\n\nCanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\n    var image = imageContainer.image;\n    \n    // Safari does not support SVG pattern fills.  So we'll skip this optimization\n    // KB 2815\n    /*if(image.width === size.width && image.height === size.height) {\n        return image;\n    }*/\n\n    var ctx, canvas = document.createElement('canvas');\n    canvas.width = size.width;\n    canvas.height = size.height;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height );\n    return canvas;\n};\n\nfunction hasEntries(array) {\n    return array.length > 0;\n}\n\nmodule.exports = CanvasRenderer;\n\n},{\"../lineargradientcontainer\":12,\"../log\":13,\"../renderer\":19}],21:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction StackingContext(hasOwnStacking, opacity, element, parent) {\n    NodeContainer.call(this, element, parent);\n    this.ownStacking = hasOwnStacking;\n    this.contexts = [];\n    this.children = [];\n    this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\n}\n\nStackingContext.prototype = Object.create(NodeContainer.prototype);\n\nStackingContext.prototype.getParentStack = function(context) {\n    var parentStack = (this.parent) ? this.parent.stack : null;\n    return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\n};\n\nmodule.exports = StackingContext;\n\n},{\"./nodecontainer\":14}],22:[function(_dereq_,module,exports){\nfunction Support(document) {\n    this.rangeBounds = this.testRangeBounds(document);\n    this.cors = this.testCORS();\n    this.svg = this.testSVG();\n}\n\nSupport.prototype.testRangeBounds = function(document) {\n    var range, testElement, rangeBounds, rangeHeight, support = false;\n\n    if (document.createRange) {\n        range = document.createRange();\n        if (range.getBoundingClientRect) {\n            testElement = document.createElement('boundtest');\n            testElement.style.height = \"123px\";\n            testElement.style.display = \"block\";\n            document.body.appendChild(testElement);\n\n            range.selectNode(testElement);\n            rangeBounds = range.getBoundingClientRect();\n            rangeHeight = rangeBounds.height;\n\n            if (rangeHeight === 123) {\n                support = true;\n            }\n            document.body.removeChild(testElement);\n        }\n    }\n\n    return support;\n};\n\nSupport.prototype.testCORS = function() {\n    return typeof((new Image()).crossOrigin) !== \"undefined\";\n};\n\nSupport.prototype.testSVG = function() {\n    var img = new Image();\n    var canvas = document.createElement(\"canvas\");\n    var ctx =  canvas.getContext(\"2d\");\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    } catch(e) {\n        return false;\n    }\n    return true;\n};\n\nmodule.exports = Support;\n\n},{}],23:[function(_dereq_,module,exports){\nvar XHR = _dereq_('./xhr');\nvar decode64 = _dereq_('./utils').decode64;\n\nfunction SVGContainer(src) {\n    this.src = src;\n    this.image = null;\n    var self = this;\n\n    this.promise = this.hasFabric().then(function() {\n        return (self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src));\n    }).then(function(svg) {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGContainer.prototype.hasFabric = function() {\n    return !window.html2canvas.svg || !window.html2canvas.svg.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\n};\n\nSVGContainer.prototype.inlineFormatting = function(src) {\n    return (/^data:image\\/svg\\+xml;base64,/.test(src)) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\n};\n\nSVGContainer.prototype.removeContentType = function(src) {\n    return src.replace(/^data:image\\/svg\\+xml(;base64)?,/,'');\n};\n\nSVGContainer.prototype.isInline = function(src) {\n    return (/^data:image\\/svg\\+xml/i.test(src));\n};\n\nSVGContainer.prototype.createCanvas = function(resolve) {\n    var self = this;\n    return function (objects, options) {\n        var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\n        self.image = canvas.lowerCanvasEl;\n        canvas\n            .setWidth(options.width)\n            .setHeight(options.height)\n            .add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options))\n            .renderAll();\n        resolve(canvas.lowerCanvasEl);\n    };\n};\n\nSVGContainer.prototype.decode64 = function(str) {\n    return (typeof(window.atob) === \"function\") ? window.atob(str) : decode64(str);\n};\n\nmodule.exports = SVGContainer;\n\n},{\"./utils\":26,\"./xhr\":28}],24:[function(_dereq_,module,exports){\nvar SVGContainer = _dereq_('./svgcontainer');\n\nfunction SVGNodeContainer(node, _native) {\n    this.src = node;\n    this.image = null;\n    var self = this;\n\n    this.promise = _native ? new Promise(function(resolve, reject) {\n        self.image = new Image();\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        self.image.src = \"data:image/svg+xml,\" + (new XMLSerializer()).serializeToString(node);\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    }) : this.hasFabric().then(function() {\n        return new Promise(function(resolve) {\n            window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\n\nmodule.exports = SVGNodeContainer;\n\n},{\"./svgcontainer\":23}],25:[function(_dereq_,module,exports){\nvar NodeContainer = _dereq_('./nodecontainer');\n\nfunction TextContainer(node, parent) {\n    NodeContainer.call(this, node, parent);\n}\n\nTextContainer.prototype = Object.create(NodeContainer.prototype);\n\nTextContainer.prototype.applyTextTransform = function() {\n    this.node.data = this.transform(this.parent.css(\"textTransform\"));\n};\n\nTextContainer.prototype.transform = function(transform) {\n    var text = this.node.data;\n    switch(transform){\n        case \"lowercase\":\n            return text.toLowerCase();\n        case \"capitalize\":\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\n        case \"uppercase\":\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\n\nfunction capitalize(m, p1, p2) {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n}\n\nmodule.exports = TextContainer;\n\n},{\"./nodecontainer\":14}],26:[function(_dereq_,module,exports){\nexports.smallImage = function smallImage() {\n    return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n};\n\nexports.bind = function(callback, context) {\n    return function() {\n        return callback.apply(context, arguments);\n    };\n};\n\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nexports.decode64 = function(base64) {\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var len = base64.length, i, encoded1, encoded2, encoded3, encoded4, byte1, byte2, byte3;\n\n    var output = \"\";\n\n    for (i = 0; i < len; i+=4) {\n        encoded1 = chars.indexOf(base64[i]);\n        encoded2 = chars.indexOf(base64[i+1]);\n        encoded3 = chars.indexOf(base64[i+2]);\n        encoded4 = chars.indexOf(base64[i+3]);\n\n        byte1 = (encoded1 << 2) | (encoded2 >> 4);\n        byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        byte3 = ((encoded3 & 3) << 6) | encoded4;\n        if (encoded3 === 64) {\n            output += String.fromCharCode(byte1);\n        } else if (encoded4 === 64 || encoded4 === -1) {\n            output += String.fromCharCode(byte1, byte2);\n        } else{\n            output += String.fromCharCode(byte1, byte2, byte3);\n        }\n    }\n\n    return output;\n};\n\nexports.getBounds = function(node) {\n    if (node.getBoundingClientRect) {\n        var clientRect = node.getBoundingClientRect();\n        var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\n        return {\n            top: clientRect.top,\n            bottom: clientRect.bottom || (clientRect.top + clientRect.height),\n            right: clientRect.left + width,\n            left: clientRect.left,\n            width:  width,\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\n        };\n    }\n    return {};\n};\n\nexports.offsetBounds = function(node) {\n    var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : {top: 0, left: 0};\n\n    return {\n        top: node.offsetTop + parent.top,\n        bottom: node.offsetTop + node.offsetHeight + parent.top,\n        right: node.offsetLeft + parent.left + node.offsetWidth,\n        left: node.offsetLeft + parent.left,\n        width: node.offsetWidth,\n        height: node.offsetHeight\n    };\n};\n\nexports.parseBackgrounds = function(backgroundImage) {\n    var whitespace = ' \\r\\n\\t',\n        method, definition, prefix, prefix_i, block, results = [],\n        mode = 0, numParen = 0, quote, args;\n    var appendResult = function() {\n        if(method) {\n            if (definition.substr(0, 1) === '\"') {\n                definition = definition.substr(1, definition.length - 2);\n            }\n            if (definition) {\n                args.push(definition);\n            }\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1 ) + 1) > 0) {\n                prefix = method.substr(0, prefix_i);\n                method = method.substr(prefix_i);\n            }\n            results.push({\n                prefix: prefix,\n                method: method.toLowerCase(),\n                value: block,\n                args: args,\n                image: null\n            });\n        }\n        args = [];\n        method = prefix = definition = block = '';\n    };\n    args = [];\n    method = prefix = definition = block = '';\n    backgroundImage.split(\"\").forEach(function(c) {\n        if (mode === 0 && whitespace.indexOf(c) > -1) {\n            return;\n        }\n        switch(c) {\n        case '\"':\n            if(!quote) {\n                quote = c;\n            } else if(quote === c) {\n                quote = null;\n            }\n            break;\n        case '(':\n            if(quote) {\n                break;\n            } else if(mode === 0) {\n                mode = 1;\n                block += c;\n                return;\n            } else {\n                numParen++;\n            }\n            break;\n        case ')':\n            if (quote) {\n                break;\n            } else if(mode === 1) {\n                if(numParen === 0) {\n                    mode = 0;\n                    block += c;\n                    appendResult();\n                    return;\n                } else {\n                    numParen--;\n                }\n            }\n            break;\n\n        case ',':\n            if (quote) {\n                break;\n            } else if(mode === 0) {\n                appendResult();\n                return;\n            } else if (mode === 1) {\n                if (numParen === 0 && !method.match(/^url$/i)) {\n                    args.push(definition);\n                    definition = '';\n                    block += c;\n                    return;\n                }\n            }\n            break;\n        }\n\n        block += c;\n        if (mode === 0) {\n            method += c;\n        } else {\n            definition += c;\n        }\n    });\n\n    appendResult();\n    return results;\n};\n\n},{}],27:[function(_dereq_,module,exports){\nvar GradientContainer = _dereq_('./gradientcontainer');\n\nfunction WebkitGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = imageData.args[0] === \"linear\" ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\n}\n\nWebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\nmodule.exports = WebkitGradientContainer;\n\n},{\"./gradientcontainer\":9}],28:[function(_dereq_,module,exports){\nfunction XHR(url) {\n    return new Promise(function(resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n\n        xhr.onload = function() {\n            if (xhr.status === 200) {\n                resolve(xhr.responseText);\n            } else {\n                reject(new Error(xhr.statusText));\n            }\n        };\n\n        xhr.onerror = function() {\n            reject(new Error(\"Network Error\"));\n        };\n\n        xhr.send();\n    });\n}\n\nmodule.exports = XHR;\n\n},{}]},{},[4])(4)\n});\n"],"sourceRoot":""}